function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(!a)return;if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor)c=a.constructor.name;if("Map"===c||"Set"===c)return Array.from(c);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return _arrayLikeToArray(a,b)}function _iterableToArray(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++){d[c]=a[c]}return d}define ("quiz_teacheroverview/charts",["jquery","quiz_teacheroverview/d3","quiz_teacheroverview/nvd3amd","core/str"],function(a,b,c,d){return{init:function init(c,e,f,g){a("#filtervalue").click(h);function h(){a("#attempts tbody tr").not(".emptyrow").show();var b=d.get_string("all_results","quiz_teacheroverview");b.done(function(b){a("#filtervalue").removeClass("filtered").html(b)});window.lastindex=-1}nv.addGraph(function(){var e=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!1).showValues(!1).duration(250).showLegend(!1);e.color(["#8F6FC2","#7f3e53","#260A55","#260A55","#260A55","#260A55","#260A55"]);e.showYAxis(!1);e.yAxis.tickFormat(b.format("d"));b.select("#block3 svg").datum(JSON.parse(c)).call(e);nv.utils.windowResize(e.update);e.discretebar.dispatch.on("elementClick",function(b){var c=d.get_string("stateinprogress","quiz"),e=d.get_string("notstarted","quiz_teacheroverview");a.when(c,e).then(function(c){var e=b.data.label.split(" - "),f=Math.min.apply(Math,_toConsumableArray(e)),g=Math.max.apply(Math,_toConsumableArray(e)),i=new URLSearchParams(window.location.search),j=i.get("display");if(window.lastindex===b.index){h()}else{a("#attempts tbody tr").not(".emptyrow").each(function(){var d=a(this).find("td.teacheroverviewgrades").text(),e=a(this).find("td.teacheroverviewstate").text();a(this).show();a(this).toggle();if(parseInt(d)>=f&&parseInt(d)<g){a(this).toggle()}if(10===parseInt(g)&&10===parseInt(d)||100===parseInt(g)&&100===parseInt(d)){a(this).toggle()}if(0===b.index&&d.includes("-")&&e.includes(c)){a(this).toggle()}});window.lastindex=b.index;var k=d.get_string("filtered_results","quiz_teacheroverview",{label:b.data.label,value:b.data.value});k.done(function(b){a("#filtervalue").addClass("filtered").html(b)});a("HTML, BODY").animate({scrollTop:a("#attempts").offset().top},800)}})});return e});nv.addGraph(function(){var c=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).showLegend(!1).showLabels(!1).labelThreshold(.05).labelType("percent").donut(!0).donutRatio(.5).color(["#260A55","#8F6FC2","#A864A8"]);c.valueFormat(b.format("d"));b.select("#block4 svg").datum(JSON.parse(e)).transition().duration(350).call(c);nv.utils.windowResize(c.update);c.pie.dispatch.on("elementClick",function(b){var c=d.get_string("stateinprogress","quiz"),e=d.get_string("notstarted","quiz_teacheroverview");a.when(c,e).then(function(c,e){var f=new URLSearchParams(window.location.search),g=f.get("display");if(window.lastindex===b.index){h()}else{a("#attempts tbody tr").not(".emptyrow").each(function(){var d=a(this).find("td.teacheroverviewgrades").text(),f=a(this).find("td.teacheroverviewstate").text();a(this).show();a(this).toggle();if(0===b.index&&!d.includes("-")){a(this).toggle()}if(1===b.index&&d.includes("-")&&f.includes(c)){a(this).toggle()}if(2===b.index&&d.includes("-")&&f.includes(e)){a(this).toggle()}});window.lastindex=b.index;var i=d.get_string("filtered_results","quiz_teacheroverview",{label:b.data.label,value:b.data.value});i.done(function(b){a("#filtervalue").addClass("filtered").html(b)});a("HTML, BODY").animate({scrollTop:a("#attempts").offset().top},800)}})});return c});a(".quiz_teacheroverview_dashboard_block2 .question_details-element").click(function(b){var c=new URLSearchParams(window.location.search),e=c.get("display"),f="td.teacheroverviewqsgrade"+parseInt(b.target.innerHTML);if(a(this).hasClass("green")){var h=f+" span.user-correct",i="filtered_results_succeeded_by_questions"}else{var h=f+" span.incorrect, "+f+" span.user-partiallycorrect, "+f+" span.notanswered",i="filtered_results_failed_by_questions"}if("full"===e){a("#attempts tbody tr").not(".emptyrow").each(function(){var b=a(this).find(a(h));a(this).show();a(this).toggle();if(0<b.length){a(this).toggle()}});var j=d.get_string(i,"quiz_teacheroverview",b.target.innerHTML);j.done(function(b){a("#filtervalue").addClass("filtered").html(b)});a("HTML, BODY").animate({scrollTop:a("#attempts").offset().top},800)}else{c.set("display","full");c.set("mode","teacheroverview");c.set("q",b.target.innerHTML);c.set("id",g);window.location.href=window.location.origin+window.location.pathname+"?"+c.toString()}});var i=new URLSearchParams(window.location.search),j=i.get("q"),k=i.get("display");if(j&&"full"===k){a(".quiz_teacheroverview_dashboard_block2 .question_details-element#dq"+j).trigger("click")}a(".quiz_teacheroverview_dashboard_block1 .clickable-grade").click(function(b){var c=a(this).attr("data-rel"),e=a(this).attr("data-title");a("#attempts tbody tr").not(".emptyrow").each(function(){a(this).show();a(this).toggle()});a(".teacheroverviewgrades a").each(function(){if(a(this).attr("data-rel")==c){a(this).parent().parent().show()}});var f=d.get_string(e,"quiz_teacheroverview",b.target.innerHTML);f.done(function(b){a("#filtervalue").addClass("filtered").html(b)});a("HTML, BODY").animate({scrollTop:a("#attempts").offset().top},800)});a("#page-mod-quiz-report #id_onlygradedui").click(function(b){b.preventDefault();index=0;var c="td.c0 input",d=[];if(window.lastindex===index){a("#id_onlygradedui > label > span").removeClass("toggle-checked");h();d=[]}else{a("#id_onlygradedui > label > span").addClass("toggle-checked");a("#attempts tbody tr").not(".emptyrow").each(function(){var b=a(this).find("td.teacheroverviewgrades").text();if(0===index&&!b.includes("-")){var e=a(this).find(c).prop("value"),f=a(this).find(c).data("userid");if(e!==void 0){if(d[f]===void 0||d[f]<=e){d[f]=e}}}});a("#attempts tbody tr").not(".emptyrow").each(function(){a(this).show();a(this).toggle();if(d[a(this).find(c).data("userid")]==a(this).find(c).prop("value")&&d[a(this).find(c).data("userid")]!==void 0){a(this).toggle()}});window.lastindex=index;a("HTML, BODY").animate({scrollTop:a("#attempts").offset().top},800)}})}}});
//# sourceMappingURL=charts.min.js.map
